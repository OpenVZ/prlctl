.TH prlsrvctl 8 "22 November 2010" "Virtuozzo"
.SH NAME
prlsrvctl \- utility for managing Virtuozzo Server.
.SH SYNOPSIS
prlsrvctl \fBinfo\fR [\fB-j, --json\fR] [\fB--license\fR] [\fB-f, --full\fR]
.PP
prlsrvctl \fBset\fR [\fR--mem-limit\fR <\fIauto\fR|\fIsize\fR>] [\fR-s,--min-security-level\fR <\fIlow\fR|\fInormal\fR|\fIhigh\fR>]
[\fR-c,--cep\fR <\fIon\fR|\fIoff\fR>]
[{\fR--device\fR <\fIdevice\fR> \fR--assignment\fR <\fIhost\fR|\fIvm\fR>}]
[\fR--backup-storage\fR \fB<user[[:passwd]@server[:port]]>\fR] [\fR--backup-path\fR <\fIpath\fR>]
[\fR--idle-connection-timeout\fR <\fItimeout\fR>] [\fR--backup-tmpdir\fR \fBtmpdir\fR]
[\fR--allow-attach-screenshots\fR <\fIon\fR|\fIoff\fR>]
[\fR--cpu-features-mask\fR <{{\fI+\fR,\fI-\fR}\fIfeature1\fR,\fIfeature=value\fR}[\fI,\fR...]>]
[\fR--vm-cpulimit-type\fR <\fIfull\fR|\fIguest\fR>]
[\fBOPTIONS\fR]
.PP
prlsrvctl \fBinstall-license\fR \fB-k,--key\fR <\fIkey\fR> [\fB-n,--name <\fIname\fR>] [\fB-c,--company\fR <\fIname\fR>] [\fBOPTIONS\fR]
.PP
prlsrvctl \fBupdate-license\fR  [\fBOPTIONS\fR]
.PP
prlsrvctl \fBshutdown\fR [\fB-f,--force\fR] [\fB--suspend-vm-to-pram\fR] [\fBOPTIONS\fR]
.PP
prlsrvctl \fBuser\fR \fBlist\fR [\fB-j, --json\fR] [\fBOPTIONS\fR]
.PP
prlsrvctl \fBuser\fR \fBset\fR \fB--def-vm-home\fR <\fIpath\fR>
.PP
prlsrvctl \fBproblem-report\fR <\fB-d,--dump\fR|\fB-s,--send\fR [\fB--proxy\fR <\fIuser[:password]@proxyhost[:port]\fR> | \fB--no-proxy\fR]> [\fB--stand-alone\fR]
.PP
prlsrvctl \fBnet add\fR <\fIvnetwork_id\fR> [\fB-i,--ifname\fR <\fIif\fR>]
[\fB-m,--mac\fR <\fImac_address\fR>] [\fB-t,--type\fR <\fIbridged|host-only\fR>]
[\fB-d,--description\fR <\fIdescription\fR>]
[\fB--ip\fR <\fIip[/mask]\fR>] [\fB--dhcp-server\fR <\fIon\fR|\fIoff\fR>] [\fB--dhcp-ip\fR <\fIip\fR>]
[\fB--ip-scope-start\fR <\fIip\fR>] [\fB--ip-scope-end\fR <\fIip\fR>]
[\fB--ip6\fR <\fIip[/mask]\fR>] [\fB--dhcp6-server\fR <\fIon\fR|\fIoff\fR>] [\fB--dhcp-ip6\fR <\fIip\fR>]
[\fB--ip6-scope-start\fR <\fIip\fR>] [\fB--ip6-scope-end\fR <\fIip\fR>]
.PP
prlsrvctl \fBnet set\fR <\fIvnetwork_id\fR> [\fB-i,--ifname\fR <\fIif\fR>]
[\fB-m,--mac\fR <\fImac_address\fR>] [\fB-t,--type\fR <\fIbridged|host-only\fR>]
[\fB-d,--description\fR <\fIdescription\fR>]
[\fB--ip\fR <\fIip[/mask]\fR>] [\fB--dhcp-server\fR <\fIon\fR|\fIoff\fR>] [\fB--dhcp-ip\fR <\fIip\fR>]
[\fB--ip-scope-start\fR <\fIip\fR>] [\fB--ip-scope-end\fR <\fIip\fR>]
[\fB--ip6\fR <\fIip[/mask]\fR>] [\fB--dhcp6-server\fR <\fIon\fR|\fIoff\fR>] [\fB--dhcp-ip6\fR <\fIip\fR>]
[\fB--ip6-scope-start\fR <\fIip\fR>] [\fB--ip6-scope-end\fR <\fIip\fR>]
.PP
prlsrvctl \fBnet del\fR <\fIvnetwork_id\fR>
.PP
prlsrvctl \fBnet info\fR <\fIvnetwork_id\fR>
.PP
prlsrvctl \fBnet list\fR [\fB-j, --json\fR]
.PP
prlsrvctl \fBprivnet add\fR <\fIprivate_network_id\fR> [\fB-a,--ipadd\fR <\fIip[/mask]\fR>]
[\fB--global\fR <\fIyes\fR|\fIno\fR>]
.PP
prlsrvctl \fBprivnet set\fR <\fIprivate_network_id\fR> [\fB-a,--ipadd\fR <\fIip[/mask]\fR>]
[\fB-d,--ipdel\fR <\fIip[/mask]\fR>] [\fB--global\fR <\fIyes\fR|\fIno\fR>]
.PP
prlsrvctl \fBprivnet del\fR <\fIprivate_network_id\fR>
.PP
prlsrvctl \fBprivnet list\fR [\fB-j, --json\fR]
.PP
prlsrvctl \fBusb list\fR [\fB-j, --json\fR] [\fBOPTIONS\fR]
.PP
prlsrvctl \fBusb set\fR <\fIusb_dev_id\fR> <\fIvm_uuid\fR | \fIvm_name\fR> [\fBOPTIONS\fR]
.PP
prlsrvctl \fBusb del\fR <\fIusb_dev_id\fR> [\fBOPTIONS\fR]
.PP
prlsrvctl \fBcttemplate\fR \fBlist\fR [\fB-j, --json\fR]
.PP
prlsrvctl \fBcttemplate\fR \fBremove\fR <\fIname\fR> [<\fIos_template_name\fR>]
.PP
prlsrvctl \fBbackup\fR [\fB-f,--full\fR] [\fB-i,--incremental\fR] [\fB-s,--storage\fR <\fIuser[:password]@server[:port]\fR>] [\fB--description\fR <\fIdesc\fR>] [\fB-u,--uncompressed\fR]
.PP
prlsrvctl \fBtc\fR \fBrestart\fR
.PP
.SH DESCRIPTION
The \fBprlsrvctl\fR utility is used to manage Virtuozzo Server.
.SH OPTIONS
.SS Flags
The following flags can be used with the majority of \fBprlsrvctl\fR commands.
.IP "\fR-l,--login user[[:passwd]@server\fR" 4
Connect to the remote Virtuozzo server using the IP address or hostname of \fBserver\fR and the specified credentials (i.e. the \fBuser\fR username and \fBpasswd\fR password). If no connection parameters are specified, \fBprlsrvctl\fR assumes that the command is run on the local server. 
.IP "\fB--timeout <sec>\fR" 4
Specify custom operation timeout in seconds (by default any operation has infinit timeout).
.SS Configuring Virtuozzo Server parameters
.IP "\fBset\fR [\fBSET_OPTIONS\fR]" 4
This command is used to set and configure various VM parameters.
.br
The following options can be used with the \fBset\fR command:
.TP
\fB--mem-limit\fR <\fIauto\fR|\fIsize\fR>
Set the total memory allocated to Virtuozzo Server and its virtual machines.
.br
\fIauto\fR - optimize the memory usage.
.br
\fIsize\fR - set memory size manually.
.TP
\fB-s,--min-security-level\fR <\fIlow\fR|\fInormal\fR|\fIhigh\fR>
Specifies the minimum allowable security level that can be used by users to
connect to the server:
.br
\fIlow\fR - none of the transmitted data is encrypted.
.br
\fInormal\fR - only the most important data is encrypted.
.br
\fIhigh\fR - all transmitted data is encrypted.
.TP
\fB-c,--cep\fR <\fIon\fR|\fIoff\fR>
Enables/disables the participation in the Customer Experience Program.
.TP
\fB--device\fR <\fIdevice\fR> \fR--assignment\fR <\fIhost\fR|\fIvm\fR>
Set assignment mode for VTd devices.
.TP
\fB--backup-path\fR <\fIpath\fR>
Set the backup location on the local server.
.TP
\fB--idle-connection-timeout\fR <\fItimeout\fR>
Sets a timeout interval in seconds after which, if no data has been received from the storage server or backup client, the process of backup/restore is terminated.
.TP
\fB--backup-tmpdir\fR <\fBtmpdir\fR>
Set the backup directory for temporary snapshot creation.
.TP
\fB--backup-storage\fR \fB<user[[:passwd]@server[:port]]>\fR
Set the default backup server.
.TP
\fB--allow-attach-screenshots\fR <\fIon\fR|\fIoff\fR>
Enables/disables attaching virtual machine and host screenshots to Problem Report.
.TP
\fB--cpu-features-mask\fR <{{\fI+\fR,\fI-\fR}\fIfeature1\fR,\fIfeature=value\fR}[\fI,\fR...]>
Changes host's global CPU features mask. NOTE: All virtual machines and Containers on the host must be stopped. On/off (boolean) features can be masked and unmasked using the {\fI+\fR,\fI-\fR}\fIfeature\fR syntax. Omitting the sign is equivalent to unmasking, e.g., the \fI+feature\fR syntax. Features which require specific values can be set using the \fIfeature=value\fR syntax. For a list of host's CPU features which are supported, maskable, and already masked, run the \fBprlsrvctl info --full\fR command.
.br
.TP
\fR--vm-cpulimit-type\fR <\fIfull\fR|\fIguest\fR>
Specifies whether the CPU limit affects all virtual machine threads including service (\fIfull\fR), or guest threads only (\fIguest\fR).
.SS Managing Virtuozzo server
.IP "\fBinstall-license\fR \fB-k,--key\fR <\fIkey\fR> [\fB-n,--name <\fIname\fR>] [\fB-c,--company\fR <\fIname\fR>]" 4
Install Virtuozzo license.
.IP "\fBupdate-license\fR" 4
Update current Virtuozzo license.
.IP "\fBshutdown\fR  \fB--suspend-vm-to-pram\fR" 4
Shut down the Virtuozzo server. If the \fB--suspend-vm-to-pram\fR option is specified,
all running VM will be suspended to PRAM.
.IP "\fBinfo\fR" 4
Show detailed information about the Virtuozzo server configuration. If the
\fB--license\fR option is specified, only the license info is displayed. You can use the \fB--json\fR option to produce machine-readable output in JSON format.
.IP "\fBproblem-report\fR <\fB-d,--dump\fR|\fB-s,--send\fR [\fB--proxy\fR <\fIuser[:password]@proxyhost[:port]\fR> | \fB--no-proxy\fR]> [\fB--stand-alone\fR]" 4
Generate a problem report. If the \fB-s,--send\fR option is specified, the report will be
sent to the report server. The \fB--stand-alone\fR option allows you to generate a report when the
Virtuozzo Server service is not running.
.SS Listing Virtuozzo server users
.IP "\fBuser\fR \fBlist\fR" 4
Lists the Virtuozzo server users.
.SS Configuring user settings
.IP "\fBuser\fR \fBset\fR" 4
This command is used to manage the settings of the user currently logged in to
the Virtuozzo server.
.TP
You can use the following option with the command:
.TP
\fB--def-vm-home\fR <\fIpath\fR>
Set the default location on the Virtuozzo server for storing virtual machines of
the current user.
.SS Configuring Virtuozzo Server Virtual Networks
.IP "\fBnet\fR [\fBNET_OPTIONS\fR]" 4
This command is used to manage Virtual Networks on the Virtuozzo server.
\fIvnetwork_id\fR denotes the Virtual Network you want to configure.
.br
The following actions can be used with the \fBnet\fR command:
.br
\fBadd\fR Create a new Virtual Network.
.br
\fBset\fR Update the Virtual Network's properties.
.br
\fBdel\fR Remove the specified Virtual Network.
.br
\fBinfo\fR Show detailed information about the specified Virtual Network.
.br
\fBlist\fR List the available Virtual Networks on the Virtuozzo server.
.TP
The following options can be used with the \fBnet\fR actions:
.TP
\fB-i,--ifname\fR <\fIif\fR>
Set the name of the network card on the Virtuozzo server to which the Virtual
Network will be bound.
.TP
\fB-m,--mac\fR <\fImac\fR>
Set the MAC address of the network card on the Virtuozzo server to which the
Virtual Network will be bound. The network card with the specified MAC
address must exist on the Virtuozzo server.
.TP
\fB-t,--type\fR <\fIbridged\fR|\fIhost-only\fR>
Specifies the type of the Virtual Network.
.br
\fIbridged\fR
A virtual machine connected to this type of Virtual Network appears as an
independent computer on the network.
.br
\fIhost-only\fR
A virtual machine connected to this type of Virtual Network can access
only the Virtuozzo server and the virtual machines connected to the same
Virtual Network.
.TP
\fB-d,--description\fR <\fIdescription\fR>
Set the Virtual Network description.
.TP
\fB--ip\fR <\fIip[/mask]\fR>
Set an IPv4 address and subnet mask for the Virtuozzo virtual adapter.
.TP
\fB--dhcp-server\fR <\fIon\fR|\fIoff\fR>
Enable or disable the Virtuozzo virtual DHCPv4 server.
.TP
\fB--dhcp-ip\fR <\fIip\fR>
Set an IPv4 address for the Virtuozzo virtual DHCPv4 server.
.TP
\fB--ip-scope-start\fR <\fIip\fR>
Set a start IPv4 address for the pool of IPv4 addresses.
.TP
\fB--ip-scope-end\fR <\fIip\fR>
Set an end IPv4 address for the pool of IPv4 addresses.
.TP
\fB--ip6\fR <\fIip[/mask]\fR>
Set an IPv6 address and subnet mask for the Virtuozzo virtual adapter.
.TP
\fB--dhcp6-server\fR <\fIon\fR|\fIoff\fR>
Enable or disable the Virtuozzo virtual DHCPv6 server.
.TP
\fB--dhcp-ip6\fR <\fIip\fR>
Set an IPv6 address for the Virtuozzo virtual DHCPv6 server.
.TP
\fB--ip6-scope-start\fR <\fIip\fR>
Set a start IPv6 address for the pool of IPv6 addresses.
.TP
\fB--ip6-scope-end\fR <\fIip\fR>
Set an end IPv6 address for the pool of IPv6 addresses.
.SS Configuring Virtuozzo Server IP private networks
.IP "\fBprivnet\fR [\fBPRIVNET_OPTIONS\fR]" 4
This command is used to manage IP private networks on the Virtuozzo server.
\fIprivate_network_id\fR denotes the IP private network you want to configure.
.br
The following actions can be used with the \fBprivnet\fR command:
.br
\fBadd\fR Create a new IP private network.
.br
\fBset\fR Update the IP private network's properties.
.br
\fBdel\fR Remove the specified IP private network.
.br
\fBlist\fR List the available IP private networks on the Virtuozzo server.
.TP
The following options can be used with the \fBprivnet\fR command:
.TP
\fB-a,--ipadd\fR <\fIaddr\fR>
Add the IP subnet to the list of subnets in the specified IP private network.
Specify an asterisk ('*') to make the IP private network "weak" and allow its IP
addresses to access all other IP addresses, excluding those in regular private
networks.
.TP
\fB-d,--ipdel\fR <\fIaddr\fR>
Remove the IP subnet from the list of subnets in the specified IP private network.
.TP
\fB--global\fR <\fIyes\fR|\fIno\fR>
Specify whether the IP subnet defines global range of the IP addresses to be
treated as covered by some private network or just particular IP private network.
.SS Configuring Automatic USB Device Assignments
.IP "\fBusb list\fR" 4
List the USB devices installed on the server together with the information on their assignments for the current user.
.IP "\fBusb set\fR <\fIusb_dev_id\fR> <\fIvm_uuid\fR | \fIvm_name\fR>" 4
Assign the USB device with ID <\fIusb_dev_id\fR> to the virtual machine <\fIvm_uuid\fR>.
This USB device will be connected to the specified virtual machine when you
start the virtual machine or attach the device to the Virtuozzo server.
.IP "\fBusb del\fR <\fIusb_dev_id\fR>" 4
Remove the assignment for the USB device with ID <\fIusb_dev_id\fR>.
.SS Configuring templates for Containers
.IP "\fBcttemplate\fR \fBlist\fR" 4
List the OS and application templates installed on the Virtuozzo server.
.IP "\fBcttemplate\fR \fBremove\fR <\fIname\fR> [<\fIos_template_name\fR>]" 4
Remove the specified OS or application template from the Virtuozzo server.
To delete an application template, you need to additionally indicate the
\fIos_template_name\fR parameter.
.IP "\fBplugin\fR \fBlist\fR" 4
List all installed Virtuozzo plugins.
.IP "\fBplugin\fR \fBrefresh\fR" 4
Refresh installed Virtuozzo plugins.
.SS Backup management
.IP "\fBbackup\fR [\fB-f,--full\fR] [\fB-i,--incremental\fR] [\fB-s,--storage\fR <\fIuser[:password]@server[:port]\fR>] [\fB--description\fR <\fIdesc\fR>] [\fB-u,--uncompressed\fR]" 4
Back up all virtual environments on the node.
.TP
\fB-f,--full\fB
Create a full backup of each virtual environment on the node. A full backup contains all the virtual environment data.
.TP
\fB-i,--incremental\fR
Create an incremental backup of each virtual environment on the node.
An incremental backup contains only the files that were changed since the previous full or incremental backup. This is the default backup type.
.TP
\fB-s,--storage\fR <\fIuser[:password]@server[:port]\fR>
Specify the host to store backup images at.
.TP
\fB--description\fR <\fIdesc\fR>
Add a description \fIdesc\fR to each virtual environment backup.
.TP
\fB-u,--uncompressed\fB
Do not compress backup images.
.SS Traffic control management
.IP "\fBtc\fR \fBrestart\fR
Apply the traffic shaping setting to all running virtual environments.
.SH DIAGNOSTICS
\fBprlsrvctl\fR returns 0 upon successful command execution. If a command fails, it returns the appropriate error code.
.SH SEE ALSO
.BR prlctl (8)
.SH COPYRIGHT
Copyright (C) Parallels, 2012. All rights reserved.
